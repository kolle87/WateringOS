@page "/counter"
@namespace WateringOS_4_0.Pages


@inject Services.CounterService _Counter

<h1>Counter</h1>

<p>Current count: @_Counter.CurrentCount</p>

<button class="btn btn-primary" @onclick="_Counter.IncreaseCount">Increase Number</button>

@code {

    protected override async Task OnInitializedAsync()
    {
        await Task.Run(delegate { _Counter.CounterChanged += OnCountChange; });
    }

    public void OnCountChange()
    {
        InvokeAsync(() => { StateHasChanged(); });
    }
}
